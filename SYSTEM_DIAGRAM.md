# System Architecture Diagram

## ğŸ“Š How the Form Works

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         USER INTERFACE                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚           Form_hc_en.html (English Form)               â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  â€¢ 8 Sections with 50+ fields                        â”‚    â”‚
â”‚  â”‚  â€¢ Conditional logic (show/hide)                     â”‚    â”‚
â”‚  â”‚  â€¢ Client-side validation                            â”‚    â”‚
â”‚  â”‚  â€¢ Loading animations                                â”‚    â”‚
â”‚  â”‚  â€¢ Success/Error messages                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                     â”‚
â”‚                            â”‚ User clicks "Submit"                â”‚
â”‚                            â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              JavaScript AJAX Handler                    â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  1. Collect form data into JSON                       â”‚    â”‚
â”‚  â”‚  2. Validate required fields                          â”‚    â”‚
â”‚  â”‚  3. Show loading overlay                              â”‚    â”‚
â”‚  â”‚  4. Send POST request to WordPress                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ AJAX POST
                             â”‚ Action: submit_hydraulic_form_en
                             â”‚ + Security nonce
                             â”‚ + Form data (JSON)
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      WORDPRESS BACKEND                           â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    functions-hydraulic-form-en.php (PHP Handler)       â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Step 1: Security Check                               â”‚    â”‚
â”‚  â”‚  â”œâ”€ Verify nonce                                      â”‚    â”‚
â”‚  â”‚  â”œâ”€ Validate required fields                          â”‚    â”‚
â”‚  â”‚  â””â”€ Sanitize input data                               â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Step 2: Save to Database                             â”‚    â”‚
â”‚  â”‚  â”œâ”€ Create Custom Post Type entry                     â”‚    â”‚
â”‚  â”‚  â”œâ”€ Save meta fields                                  â”‚    â”‚
â”‚  â”‚  â””â”€ Store full JSON data                              â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Step 3: Send Notifications                           â”‚    â”‚
â”‚  â”‚  â”œâ”€ Format admin email (HTML)                         â”‚    â”‚
â”‚  â”‚  â”œâ”€ Format client email (HTML)                        â”‚    â”‚
â”‚  â”‚  â””â”€ Send via wp_mail()                                â”‚    â”‚
â”‚  â”‚                                                        â”‚    â”‚
â”‚  â”‚  Step 4: Return Response                              â”‚    â”‚
â”‚  â”‚  â””â”€ Send JSON success/error to frontend               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database   â”‚   â”‚  Email Server   â”‚   â”‚  Response    â”‚
â”‚             â”‚   â”‚                 â”‚   â”‚              â”‚
â”‚ Custom Post â”‚   â”‚  Admin Email â”€â”€â–¶â”‚   â”‚ JSON sent to â”‚
â”‚ Type:       â”‚   â”‚  (Notification) â”‚   â”‚ JavaScript   â”‚
â”‚ "hydraulic_ â”‚   â”‚                 â”‚   â”‚              â”‚
â”‚  request"   â”‚   â”‚  Client Email â”€â–¶â”‚   â”‚ Show success â”‚
â”‚             â”‚   â”‚  (Confirmation) â”‚   â”‚ or error     â”‚
â”‚ â€¢ Title     â”‚   â”‚                 â”‚   â”‚              â”‚
â”‚ â€¢ Content   â”‚   â”‚  Both HTML      â”‚   â”‚              â”‚
â”‚ â€¢ Meta      â”‚   â”‚  formatted with â”‚   â”‚              â”‚
â”‚ â€¢ JSON data â”‚   â”‚  branding       â”‚   â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚                                         â”‚
      â”‚                                         â”‚
      â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     WordPress Admin Panel        â”‚   â”‚   User sees:     â”‚
â”‚                                  â”‚   â”‚                  â”‚
â”‚  Hydraulic Requests              â”‚   â”‚  âœ“ Success msg   â”‚
â”‚  â””â”€ [EN] Company - 17.10.2024   â”‚   â”‚  Form resets     â”‚
â”‚     â€¢ Company: ABC Ltd           â”‚   â”‚  Smooth scroll   â”‚
â”‚     â€¢ Email: user@example.com    â”‚   â”‚                  â”‚
â”‚     â€¢ Phone: +372 XXX XXXX       â”‚   â”‚  OR              â”‚
â”‚     â€¢ Full specs visible         â”‚   â”‚                  â”‚
â”‚     â€¢ Can view/edit/delete       â”‚   â”‚  âœ• Error msg     â”‚
â”‚                                  â”‚   â”‚  Form preserved  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   User     â”‚
â”‚ fills form â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1. Enters data (company, specs, etc.)
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Client-side JS  â”‚
â”‚  Validation      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 2. Validates required fields
       â”‚    Prepares JSON payload
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AJAX Request    â”‚
â”‚  to WordPress    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 3. POST /wp-admin/admin-ajax.php
       â”‚    Action: submit_hydraulic_form_en
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WordPress AJAX Handler  â”‚
â”‚  (PHP Backend)           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                         â”‚
       â–¼                                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Save to DB    â”‚                    â”‚  Send Emails    â”‚
â”‚                â”‚                    â”‚                 â”‚
â”‚ â€¢ Create Post  â”‚                    â”‚ â€¢ Admin email   â”‚
â”‚ â€¢ Save Meta    â”‚                    â”‚ â€¢ Client email  â”‚
â”‚ â€¢ Store JSON   â”‚                    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                         â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”‚ 4. Return JSON response
                     â”‚
                     â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Frontend JS â”‚
              â”‚  handles      â”‚
              â”‚  response     â”‚
              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                     â”‚                 â”‚                 â”‚
                     â–¼                 â–¼                 â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Hide     â”‚      â”‚ Show     â”‚     â”‚ Reset    â”‚
              â”‚ loading  â”‚      â”‚ success  â”‚     â”‚ form     â”‚
              â”‚ overlay  â”‚      â”‚ message  â”‚     â”‚ after 5s â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“§ Email Flow Diagram

```
Form Submission
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PHP Email Handler                      â”‚
â”‚                                               â”‚
â”‚  hydroforce_send_admin_notification_en()      â”‚
â”‚  hydroforce_send_client_confirmation_en()     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
        â”‚                              â”‚
        â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ADMIN EMAIL     â”‚          â”‚  CLIENT EMAIL      â”‚
â”‚                  â”‚          â”‚                    â”‚
â”‚  To: admin@      â”‚          â”‚  To: client@       â”‚
â”‚  From: noreply@  â”‚          â”‚  From: noreply@    â”‚
â”‚  Reply-To:       â”‚          â”‚  Reply-To: -       â”‚
â”‚    client@       â”‚          â”‚                    â”‚
â”‚                  â”‚          â”‚                    â”‚
â”‚  Subject:        â”‚          â”‚  Subject:          â”‚
â”‚  "New Hydraulic  â”‚          â”‚  "Request          â”‚
â”‚   Cylinder       â”‚          â”‚   Confirmation"    â”‚
â”‚   Request"       â”‚          â”‚                    â”‚
â”‚                  â”‚          â”‚  Content:          â”‚
â”‚  Content:        â”‚          â”‚  â€¢ Thank you msg   â”‚
â”‚  â€¢ Contact info  â”‚          â”‚  â€¢ Summary of      â”‚
â”‚  â€¢ Tech specs    â”‚          â”‚    submission      â”‚
â”‚  â€¢ All details   â”‚          â”‚  â€¢ What happens    â”‚
â”‚  â€¢ Link to admin â”‚          â”‚    next            â”‚
â”‚    panel         â”‚          â”‚  â€¢ Contact info    â”‚
â”‚                  â”‚          â”‚    for questions   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                              â”‚
        â–¼                              â–¼
  Admin Inbox                    Client Inbox
```

---

## ğŸ—„ï¸ Database Structure

```
WordPress Database (wp_posts)
â”œâ”€â”€ Post Type: "hydraulic_request"
â”‚
â”œâ”€â”€ Post Fields:
â”‚   â”œâ”€â”€ ID (auto)
â”‚   â”œâ”€â”€ post_title: "[EN] ABC Company - 17.10.2024 14:30"
â”‚   â”œâ”€â”€ post_content: Formatted HTML content
â”‚   â”œâ”€â”€ post_status: "publish"
â”‚   â”œâ”€â”€ post_author: 1 (admin)
â”‚   â””â”€â”€ post_date: auto
â”‚
â””â”€â”€ Meta Fields (wp_postmeta):
    â”œâ”€â”€ _company: "ABC Company"
    â”œâ”€â”€ _contact_person: "John Doe"
    â”œâ”€â”€ _email: "john@abc.com"
    â”œâ”€â”€ _phone: "+372 XXX XXXX"
    â”œâ”€â”€ _date: "2024-10-17"
    â”œâ”€â”€ _language: "en"
    â”œâ”€â”€ _cylinder_type: "double_acting"
    â”œâ”€â”€ _working_pressure: "250"
    â”œâ”€â”€ _stroke: "500"
    â”œâ”€â”€ _bore: "80"
    â””â”€â”€ _full_form_data: "{...}" (complete JSON)
```

---

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Form Load  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ WordPress generates nonce
       â”‚ wp_create_nonce('hydraulic_form_nonce')
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  JavaScript receives â”‚
â”‚  hydroforce_ajax:    â”‚
â”‚  â€¢ ajax_url          â”‚
â”‚  â€¢ nonce (token)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User submits form
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AJAX POST includes: â”‚
â”‚  â€¢ action name       â”‚
â”‚  â€¢ nonce token       â”‚
â”‚  â€¢ form data         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PHP Backend verifies:     â”‚
â”‚  wp_verify_nonce()         â”‚
â”‚                            â”‚
â”‚  âœ“ Valid â†’ Process         â”‚
â”‚  âœ— Invalid â†’ Error 403     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ File Dependencies

```
Frontend (HTML/JS)
â”‚
â”œâ”€â”€ Form_hc_en.html
â”‚   â”œâ”€â”€ HTML Structure
â”‚   â”œâ”€â”€ CSS Styling (embedded)
â”‚   â””â”€â”€ JavaScript
â”‚       â”œâ”€â”€ Conditional field logic
â”‚       â”œâ”€â”€ Form validation
â”‚       â”œâ”€â”€ AJAX submission
â”‚       â””â”€â”€ Success/Error handling
â”‚
â””â”€â”€ Requires: jQuery (usually included by WordPress)

Backend (PHP)
â”‚
â”œâ”€â”€ functions-hydraulic-form-en.php
â”‚   â”œâ”€â”€ AJAX Handler
â”‚   â”‚   â””â”€â”€ Action: submit_hydraulic_form_en
â”‚   â”œâ”€â”€ Database Functions
â”‚   â”‚   â”œâ”€â”€ Save request
â”‚   â”‚   â””â”€â”€ Save meta fields
â”‚   â”œâ”€â”€ Email Functions
â”‚   â”‚   â”œâ”€â”€ Admin notification
â”‚   â”‚   â””â”€â”€ Client confirmation
â”‚   â””â”€â”€ Helper Functions
â”‚       â”œâ”€â”€ Format content
â”‚       â”œâ”€â”€ Format emails
â”‚       â””â”€â”€ Validate data
â”‚
â””â”€â”€ Requires: WordPress Core (wp_mail, wp_insert_post, etc.)
```

---

## ğŸ­ State Machine

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  INITIAL     â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  (Form Empty)â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                        â”‚
       â”‚ User types             â”‚ Reset after 5s
       â–¼                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  FILLING     â”‚                â”‚
â”‚  (Has data)  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                        â”‚
       â”‚ Click Submit           â”‚
       â–¼                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  VALIDATING  â”‚                â”‚
â”‚  (JS check)  â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                        â”‚
       â”œâ”€ Invalid â”€â”€> Error msg â”‚
       â”‚                        â”‚
       â”‚ Valid                  â”‚
       â–¼                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  SENDING     â”‚                â”‚
â”‚  (Loading)   â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚                        â”‚
       â”‚ AJAX to server         â”‚
       â”‚                        â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤
       â”‚                 â”‚      â”‚
       â–¼                 â–¼      â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ SUCCESS  â”‚      â”‚  ERROR   â”‚â”€â”˜
â”‚          â”‚      â”‚          â”‚
â”‚ â€¢ Messageâ”‚      â”‚ â€¢ Messageâ”‚
â”‚ â€¢ Reset  â”‚â”€â”€â”€â”€â”€â”€â”‚ â€¢ Keep   â”‚
â”‚   form   â”‚      â”‚   data   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ Network Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser    â”‚
â”‚ (Client)     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTPS GET
       â”‚ /hydraulic-cylinder-request/
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web Server      â”‚
â”‚  (Apache/Nginx)  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Serve HTML page
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WordPress       â”‚
â”‚  (PHP)           â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Page renders with form
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User fills form â”‚
â”‚  Clicks submit   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ HTTPS POST (AJAX)
       â”‚ /wp-admin/admin-ajax.php
       â”‚ ?action=submit_hydraulic_form_en
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  WordPress AJAX  â”‚
â”‚  Handler (PHP)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                â”‚                â”‚
       â–¼                â–¼                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MySQL DB â”‚   â”‚ SMTP       â”‚   â”‚ Response â”‚
â”‚ (Save)   â”‚   â”‚ (Email)    â”‚   â”‚ (JSON)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**This diagram shows the complete system architecture.**
**For setup instructions, see: INSTALLATION_INSTRUCTIONS.md**
